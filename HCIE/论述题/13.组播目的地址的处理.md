# 组播目的地址的处理

## 1. 题目 1

路由器收到组播数据包目的地址是224.0.0.5和239.0.0.5的处理方式？

一、路由器收到组播数据包目标地址为 224.0.0.5 的处理方式

组播目标地址 `224.0.0.5` 为 OSPF 协议预留地址，运行了 OSPF 协议的路由器都会监听相应的组播地址，当设备收到目标地址为 `224.0.0.5` 的组播数据包之后（协议号为 89），会继续上送 CPU 交由 OSPF 处理：

​	如果路由器未启用 OSPF 协议则丢弃相应报文

​	如果路由器正确启用 OSPF 协议，则需要根据不同的网络类型处理不同的 OSPF 报文，具体分析如下：

1. 点到点类型（Point-to-Point）

   在该类型网络中，Hello 报文、DD 报文、LSR 报文、LSU 报文、LSAck 报文等报文的目的地址为 `224.0.0.5`

2. 广播类型（Broadcast）

   在该类型网络中，Hello 报文、LSU 报文、LSAck 报文等报文的目的地址为 `224.0.0.5`

3. 点到多点类型（Point-to-Multipoint）

   在该类型网络中，Hello 报文的目的地址为 `224.0.0.5`

  上述网络类型中 OSPF 收到不同报文的处理如下：

1.  路由器收到 Hello 报文

   会检查相应参数，参数协败则丢弃相应的 OSPF Hello 报文

   参数协商成功则继续通过是 `Active-Neighbor` 字段建立双向通信邻居关系，利用优先级和 Router-id 完成 DR、BDR 选举，后续通过参数正确的 OSPF 报文维系邻居关系并刷新超时计时器。

2.  路由器收到 DD 报文

   如果开启 MTU 检测则检测 MTU 是否一致，进一步选举主从关系保证 DD 可靠、有序交互，通过 LSA 头部信息完成链路状态数据库对比。

3.  路由器收到 LSR 请求报文

   收到 LSR 消息会包含对方需要请求 LSA 的三要素，会回应 LSU 携带相应明细 LSA 信息更新。

4.  路由器收到 LSU 报文

   收到 LSU 更新报文的目的地址为 `224.0.0.5`，则需要通过 LSAck 进行确认。

5.  路由器收到 LSAck 报文

   报文中携带 LSA 头部会确认之前的 LSU 是否更新成功，否则需要进行超时重传。

## 2. 题目 2

路由器收到组播数据包目标地址为239.0.0.5的处理方式

