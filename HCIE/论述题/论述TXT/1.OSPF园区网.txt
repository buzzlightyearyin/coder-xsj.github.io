一、OSPF 多区域部署的方案
结合当前拓扑，OSPF 区域规划如下：
核心路由器和汇聚层路由器之间所有链路部署在 AREA 0 骨干区域中
汇聚路由器和接入路由器之间所有链路部署在 AREA 10 区域中
汇聚路由器和接入路由器（AR7）之间链路部署在 AREA 20 区域中
为了实现办公网络发生变化时不影响到服务器区域路由器，可以使用如下方案：
1、特殊区域
将服务器所在区域配置为特殊区域，考虑到后续可能引入直连路由，建议配置为 Totally NSSA 区域。
部署特殊区域之后，办公网络所有域间明细路由、外部路由都无法进入 NSSA 区域，AR4 作为 ABR 会下发默认路由指导本区域设备访问域间和域外。
由于域间明细路由、外部路由都无法进入 NSSA 区域，本区域设备无法感知其它区域的路由变化。
AR4、AR7 配置特殊区域命令如下：
ospf 1
    area 20
        nssa no-summary	// 配置为 Totally NSSA 区域

2、路由汇总
在 AR4 上执行域间路由汇总，将办公区域所有业务网段进行路由汇总，AR4 作为 ABR 只将汇总后的路由传递进服务器网络所在区域中，需要确保汇总到所有路由，因此需要考虑前期 IP 地址规划。
AR4 执行路由汇总配置命令如下：
ospf 1
    area 10
        abr-summary x.x.x.x y.y.y.y	// x.x.x.x 为汇总后的 ip，y.y.y.y 为汇总后的掩码
建议手工配置或生成自动指向 NULL 的黑洞路由，防止路由汇总导致环路问题。

以上两种方案都可以满足要求，并且后续可以继续通过路由过滤和路由汇总进行相应的路由控制。

二、OSPF 多进程
在 AR4 上部署 OSPF 多进程的方案实现将办公区域网络和服务器区域网络进行隔离，AR4 作为 ASBR 将服务器所在网络引入进办公区域，为了使得办公网络发生变化时不影响到服务器区域路由器，可以在 AR4 服务器网络所在进程中通告默认路由，无需将办公网络明细路由引入进服务器所在网络。
AR4 配置下发默认路由
ospf 2	// 服务器网络所在进程
    default-route-advertise	// 下发默认路由


结合当前拓扑，需要在 AR1 和 AR2 上通过 OSPF 下发默认路由，缺省情况下默认路由通常以 LSA-5 在除特殊区域以外的整个自制系统内泛洪。
此时可以通过如下方案影响外部路由选路：
一、修改外部路由类型
OPSF 下发的 LSA-5 通常有两种度量值类型：Type-1 和 Type-2，缺省情况下为 Type-2 类型，由于 OSPF 计算路由时 Type-1 会优于 Type-2，为了使得流量优选 R1，可以在 R1 配置下发默认路由时修改路由类型 Type-1。
R1 配置命令如下：
ospf 1
    default-route-advertise type 1	// 下发默认路由并修改类型为 type-1

二、修改路由开销值
1、修改外部开销值
由于默认情况下 OSPF 下发默认路由会以 Type-2 的 LSA-5 形式传递，类型 Type-2 的 LSA-5 进行选路比较的时候首先比较外部开销值，在 R2 配置如下命令修改外部开销值影响选路，将外部开销值改大。
ospf 1
    default-route-advertise cost 1000

2、修改内部开销值
R1 和 R2 都通过相应命令下发默认路由，类型 Type-2 的 LSA-5 进行如下选路比较：
A、首先比较外部开销值，而外部开销值默认为 1
B、其次比较内部开销值（去往 ASBR）
建议修改接入路由器 AR6 和汇聚路由器 AR4、汇聚路由器 AR4 和核心路由器 AR2 之间互联链路的开销值
以 AR4 为例，配置如下：
interface GigabitEthernet x/x/x
    ospf cost 100

上述方案成功部署之后，可以满足所有业务流量通过 R1 访问外部，但是考虑到当前网络拓扑中 R2 设备自身会通过本地配置的默认路由访问外部网络，为保证所有流量包括 R2 设备访问外部的流量都将 R1 作为出口，建议进行如下配置：
首先 R1 配置默认路由指向 ISP 并通过 OSPF 下发默认路由，由于 R2 也配置了上述命令实现备份，所以缺省情况下 R2 不会使用 R1 下发的 LSA-5 进行路由计算，需要在 R2 配置命令允许 R1 下发的默认路由，具体配置如下：
ospf 1
    default-route-advertise permit-calculate-other
其次由于静态路由协议优先级为 60，要由于 OSPF 外部路由优先级 150，所以 R2 需要修改之前配置指向 ISP 的默认路由优先级，建议修改为 151，具体配置如下：
ip route-static 0.0.0.0 0.0.0.0 x.x.x.x preference 151    // x.x.x.x 为 ISP 接口地址

修改之后 R2 会优选 R1 通过 OSPF 下发默认路由，整个 OSPF 自治系统全部选择 R1 作为出口访问 ISP。